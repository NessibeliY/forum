{{define "posts"}}
{{if .posts}}
    {{range .posts}}
    <div class="postCard post card">
        <div class="w-full flex flex-col justify-between">
            <div class="post_header">
                <div class="user_icon post_icon">
                    <i class="fa-solid fa-user"></i>
                </div>
                <div class="flex w-full justify-between">
                    <!-- AUTHOR -->
                    <div class="flex flex-col ml-2">
                        <span class="text-base text-slate-400 font-extralight italic">
                            {{ .CreatedAt.Format "02-01-2006 15:04"}}
                        </span>
                    </div>
                    <!-- CHECK IF USER IS OWNER -->
                    {{if eq .authenticated_user.ID .AuthorID}}
                        <div class="text-xl dropdown">
                            <i class="fa-solid fa-bars" data-target="dropdown-{{.ID}}"></i>
                            <div class="select_menu " id="dropdown-{{.ID}}">
                                <ul class="options card">
                                    <li class="option del_btn_modal" data-modal="delete_modal_{{.ID}}">
                                        Delete
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <!-- DELETE POST MODAL SUBMIT -->
                        <div class="modal" id="delete_modal_{{.ID}}">
                            <div class="modal-content delete_form_modal">
                                <div class="flex items-center justify-between w-full">
                                    <span class="text-bold text-2xl">DELETE POST</span>
                                    <span class="close" data-close="delete_modal_{{.ID}}">&times;</span>
                                </div>
                                <form action="/user/post/delete" method="POST" class="flex flex-col items-center justify-center w-full mt-3">
                                    <input type="hidden" name="PostID" value="{{.ID}}">
                                    <p class="text-xl">Are you sure??</p>
                                    <div class="flex items-center justify-center mt-2">
                                        <button class="bg-red-600 py-2 px-2 mx-1 rounded-lg text-white hover:bg-red-700 transition duration-300" type="submit">yes</button>
                                        <div class="bg-green-600 py-2 px-2 mx-1 rounded-lg text-white hover:bg-green-700 transition duration-300 cursor-pointer" data-close="delete_modal_{{.ID}}">no</div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    {{end}}
                </div>
            </div>
            <div class="flex w-full flex-col py-4 px-4 break-words">
                <a href="/post/?post-id={{.ID}}" class="postsTitle">{{ .Title }}</a>
                <!-- POST DESCRIPTION -->
                <p class="text-lg my-2">{{ .Content }}</p>
                <!-- POST TAGS -->
                <div class="flex flex-wrap w-full my-2 break-words">
                    {{range .Categories}}
                        <span class="mr-1 text-base cursor-pointer text-gray-500 text-sm italic hover:text-red-600 transition duration-300">#{{.Name}}</span>
                    {{end}}
                </div>
                <!-- LIKE AND DISLIKE -->
                <div class="flex w-full mt-4">
                    <div class="header_wrapper">
                        <div class="flex">
                            <form action="/like" method="POST">
                                <input type="hidden" name="PostID" value="{{.ID}}">
                                {{if .IsLikedByUser}}
                                    <button class="btn_like btn_like_active" type="submit">
                                        <i class="fa-regular fa-thumbs-up mx-1"></i> Liked({{ .LikesCount }})
                                    </button>
                                {{else}}
                                    <button class="btn_like" type="submit">
                                        <i class="fa-regular fa-thumbs-up mx-1"></i> Liked({{ .LikesCount }})
                                    </button>
                                {{end}}
                            </form>
                            <form action="/dislike" method="POST">
                                <input type="hidden" name="PostID" value="{{.ID}}">
                                {{if .IsDislikedByUser}}
                                    <button class="btn_like btn_like_active" type="submit">
                                        <i class="fa-regular fa-thumbs-down mx-1"></i> Disliked({{ .DislikesCount }})
                                    </button>
                                {{else}}
                                    <button class="btn_like" type="submit">
                                        <i class="fa-regular fa-thumbs-down mx-1"></i> Disliked({{ .DislikesCount }})
                                    </button>
                                {{end}}
                            </form>
                        </div>
                        <a href="/post/?post-id={{.ID}}" class="btn_like">
                            <i class="fa-regular fa-comments mx-1 text-2xl"></i>{{ .CommentsCount }}
                        </a>
                    </div>
                </div>
                <hr class="w-full mt-3 bg-gray-500"/>
            </div>
        </div>
    </div>
    {{end}}
{{else}}
    <h1 class="text-5xl my-2" style="color: white;">EMPTY</h1>
{{end}}
{{end}}
